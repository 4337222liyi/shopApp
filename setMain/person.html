<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<!--App自定义的css-->
		<link rel="stylesheet" type="text/css" href="../css/app.css" />
	</head>

	<body> 
		<header class="mui-bar mui-bar-nav">
			<button type="button" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left">
					<span class="mui-icon mui-icon-left-nav"></span>个人信息
				</button>
			<h1 class="mui-title"></h1>
		</header>
		 
			<div class="mui-content">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell" style="margin-top: 50px;">
								<a id="head" class="mui-navigate-right">头像
								<span class="mui-pull-right head">
									<img class="head-img mui-action-preview" id="head-img1" src="images/liyi.png"/>
								</span>
							</a>
							</li>
							<li class="mui-table-view-cell">
								<a href="javascript:void(0)">昵称<span class="mui-pull-right" id="F_NickName">改用户很懒没有昵称</span></a>
							</li>
							<li class="mui-table-view-cell">
								<a>账号<span class="mui-pull-right" id="F_UserName">改用户很懒没有账号</span></a>
							</li>
						</ul>
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								<a>QQ号<span class="mui-pull-right" id="F_QQ">改用户很懒没有QQ</span></a>
							</li>
							<li class="mui-table-view-cell">
								<a>手机号<span class="mui-pull-right" id="F_Mobile">改用户很懒没有手机号</span></a>
							</li>
							<li class="mui-table-view-cell">
								<a>邮箱地址<span class="mui-pull-right" id="F_Email">改用户很懒没有邮箱</span></a>
							</li>
						</ul>
					</div>
				</div> 
		</div> 
		<script src="../js/jquery-1.9.1.min.js "></script>
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript">
		
		mui.init()
			
	     var F_USER_ID = localStorage.getItem("F_USER_ID"); 
		 // console.log("F_USER_ID:"+F_USER_ID);
		 //$.ajax('http://192.168.1.102:8080/shopConsole/tbUserController/mobileGetUserById.do',{
		 $.ajax('http://www.jiujichina.com/shopConsole/tbUserController/mobileGetUserById.do',{
					data:{F_USER_ID:F_USER_ID},
					dataType:'jsonp',//服务器返回json格式数据
					type:'post',//HTTP请求类型
					timeout:10000,//超时时间设置为10秒； 
					 jsonp: "callbackparam", 
					 jsonpCallback: "success_jsonpCallback",
					success:function(data){   
						console.info(data.F_NickName);
						if(data.F_NickName!='undefined'){
							 $("#F_NickName").text(data.F_NickName);
						}
						if(data.F_UserName!='undefined'){
							  $("#F_UserName").text(data.F_UserName);
						} 
						 $("#F_QQ").text(data.F_QQ);
						 $("#F_Mobile").text(data.F_Mobile);
						 $("#F_Email").text(data.F_Email);
			       }
		 }); 
		 
		 	document.getElementById("F_NickName").addEventListener('tap', function(e) {
				e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
				var btnArray = ['取消', '确定'];
				mui.prompt('请输入昵称', $(this).text(), '', btnArray, function(e) {
					if (e.index == 1) {
						updateInfo('F_NickName',e.value,{"F_USER_ID":F_USER_ID,"F_NickName":e.value}); 
					} else { 
					}
				})
			}); 
			
			document.getElementById("F_UserName").addEventListener('tap', function(e) {
				e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
				var btnArray = ['取消', '确定'];
				mui.prompt('请输入账号', $(this).text(), '', btnArray, function(e) {
					if (e.index == 1) {
						updateInfo('F_UserName',e.value,{"F_USER_ID":F_USER_ID,"F_UserName":e.value}); 
					} else { 
					}
				})
			}); 
			
			document.getElementById("F_QQ").addEventListener('tap', function(e) {
				e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
				var btnArray = ['取消', '确定'];
				mui.prompt('请输入QQ号', $(this).text(), '', btnArray, function(e) {
					if (e.index == 1) {
						updateInfo('F_QQ',e.value,{"F_USER_ID":F_USER_ID,"F_QQ":e.value}); 
					} else { 
					}
				})
			}); 
			
			document.getElementById("F_Mobile").addEventListener('tap', function(e) {
				e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
				var btnArray = ['取消', '确定'];
				mui.prompt('请输入手机号', $(this).text(), '', btnArray, function(e) {
					if (e.index == 1) {
						updateInfo('F_Mobile',e.value,{"F_USER_ID":F_USER_ID,"F_Mobile":e.value}); 
					} else { 
					}
				})
			}); 
			
			document.getElementById("F_Email").addEventListener('tap', function(e) {
				e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
				var btnArray = ['取消', '确定'];
				mui.prompt('请输入邮箱', $(this).text(), '', btnArray, function(e) {
					if (e.index == 1) {
						updateInfo('F_Email',e.value,{"F_USER_ID":F_USER_ID,"F_Email":e.value}); 
					} else { 
					}
				})
			}); 
			
		 
			function updateInfo(id,newValue,data){
				// $.ajax('http://192.168.1.100:8080/shopConsole/tbUserController/mobileUpdateInfo.do',{
				 $.ajax('http://www.jiujichina.com/shopConsole/tbUserController/mobileUpdateInfo.do',{
					data:data,
					dataType:'jsonp',//服务器返回json格式数据
					type:'post',//HTTP请求类型
					timeout:10000,//超时时间设置为10秒； 
					 jsonp: "callbackparam", 
					 jsonpCallback: "success_jsonpCallback",
					success:function(data){  
						if(!data.iserror){
						   mui.toast('修改成功'); 
						   $("#"+id).text(newValue);
						}else{
						   mui.toast('修改失败');
						} 
			        }
		         }); 
			}
			
		</script>
	</body>

</html>